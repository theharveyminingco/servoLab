#include <Servo.h>

Servo base;  // create servo object to control a servo
Servo bicep;
Servo elbow;
Servo wrist;
Servo claw;

// twelve servo objects can be created on most boards

int pos0 = 90;    // pos0 is base - var to store servo init angle 
int pos1 = 90;    // pos1 is bicep -90 degrees allows equal movement L or R
int pos2 = 90;    // pos2 is elbow
int pos3 = 90;    // pos3 is wrist
int pos4 = 0;     // this is the claw, 0 equals open

int ByteReceived; // to get keyboard input
int curr_angle; 

int inpot = 0; //a0 analog input for potientometer
int rotval; // base rotation val to store and write to servo

int wristval; // wrist rotation val to store and write to servo
int wristpot = 2; //wrist pin set to analog input 2

int elbowval;
int elbowpot = 5;

int claw_in = 13; //set digital input 12 to the claw. 
int clawval;

int bicepval;
int biceppot = 7;
 
void setup() {
  base.attach(2);  // attaches the servo on pin 2 to the servo object
  bicep.attach(4); // Sets each servo as a  joint for eazy coding thought
  elbow.attach(6);
  wrist.attach(8);
  claw.attach(10);

  pinMode(claw_in, INPUT);
  
  base.write(pos0); // set all servos to the init pos
  bicep.write(pos1); // all positions are 90 to allow range of motion 
  elbow.write(pos2);
  wrist.write(pos3);
  claw.write(pos4);

  
  Serial.begin(9600); 

// So far all servos are attached and initialized at base 90 values (that could change)
// need to write functions for moving the arm

}

void loop() {
//MAIN PROGRAM HERE



//rotation value constrained and converted to digital signal for servo
rotval = analogRead(inpot); //returns a val between 0 and 1023
rotval = constrain(rotval, 0, 1023);
rotval = map(rotval, 0, 1023, 0, 180);
base.write(rotval);
//delay(120);

wristval = analogRead(wristpot); //returns a val between 0 and 1023
wristval = constrain(wristval, 0, 1023);
wristval = map(wristval, 0, 1023, 0, 180);
wrist.write(wristval);


elbowval = analogRead(elbowpot); //returns a val between 0 and 1023
elbowval = constrain(elbowval, 0, 1023);
elbowval = map(elbowval, 0, 1023, 0, 180);
elbow.write(elbowval);


bicepval = analogRead(biceppot); //returns a val between 0 and 1023
bicepval = constrain(bicepval, 0, 1023);
bicepval = map(bicepval, 0, 1023, 0, 180);
bicep.write(bicepval);

clawval = digitalRead(claw_in);
if (clawval != LOW) {
  claw.write(180);
}
else if (clawval == LOW){
  claw.write(0);
}



// claw check

delay(120);


}



